@baseUrl = http://localhost:3000
@tenant_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5OGRjOTNhYmJmMmM2YWI2ODFiYzBjZSIsInJvbGUiOjAsImlhdCI6MTc3MDkwMjQ0NiwiZXhwIjoxNzcxNTA3MjQ2fQ.WGj36k99j4nrEum2X1F57FLHVvlwzj2Mqnv2bWYnhmc
@owner_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5OGRhNjFmNDBlNDJlMWRiOWJhN2EyZCIsInJvbGUiOjEsImlhdCI6MTc3MDkxMTQ2NCwiZXhwIjoxNzcxNTE2MjY0fQ.f7u5U37UkztPSwI61HKPS91n5iAD9uROLqUSdgIoVvU

#######################################
### 2️⃣ LOGIN TENANT
#######################################

### Login tenant
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "chu-nha-01@gmail.com",
  "password": "0987654321"
}

### Logout
POST {{baseUrl}}/api/auth/logout
Authorization: Bearer {{tenant_token}}


#######################################
### 3️⃣ LOGIN OWNER (ĐÃ SET ROLE TRONG DB)
#######################################

### Login owner
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "admin@gmail.com",
  "password": "123456"
}

### Logout
POST {{baseUrl}}/api/auth/logout
Authorization: Bearer {{owner_token}}

#######################################
### 7️⃣ TEST GET USER BY ID
#######################################

### Owner get other user (SUCCESS)
GET {{baseUrl}}/api/users/6981a0b50a0f1d184ed05413
Authorization: Bearer {{owner_token}}

###
# EXPECT: 200 OK
# Response có thông tin user
###

### Tenant get their own user (SUCCESS)
GET {{baseUrl}}/api/users/698dc93abb72c6ab681bc0ce
Authorization: Bearer {{tenant_token}}

###
# EXPECT: 200 OK
# Tenant có thể xem user của họ
###

### Tenant get other user (FORBIDDEN)
GET {{baseUrl}}/api/users/6981a0b50a0f1d184ed05413
Authorization: Bearer {{tenant_token}}

###
# EXPECT: 403 Forbidden
# Response: {"message": "You can only view your own profile"}
###

### Get non-existent user (NOT FOUND)
GET {{baseUrl}}/api/users/507f1f77bcf86cd799439011
Authorization: Bearer {{owner_token}}

###
# EXPECT: 404 Not Found
# Response: {"message": "User not found"}
###

### Get user without auth (UNAUTHORIZED)
GET {{baseUrl}}/api/users/6981a0b50a0f1d184ed05413

###
# EXPECT: 401 Unauthorized
###

#######################################

### Get all users (SUCCESS - OWNER)
GET {{baseUrl}}/api/users
Authorization: Bearer {{owner_token}}

###
# EXPECT: 200 OK
# Response sẽ có danh sách tất cả users (không có password)
###

### Search users by email
GET {{baseUrl}}/api/users?email=admin
Authorization: Bearer {{owner_token}}

###
# EXPECT: 200 OK
# Response sẽ có users có email chứa "admin" (case insensitive)
###

### Search users by name
GET {{baseUrl}}/api/users?name=nguyen
Authorization: Bearer {{owner_token}}

###
# EXPECT: 200 OK
# Response sẽ có users có tên chứa "nguyen" (case insensitive)
###

### Search users by phone
GET {{baseUrl}}/api/users?phone=0123
Authorization: Bearer {{owner_token}}

###
# EXPECT: 200 OK
# Response sẽ có users có số điện thoại chứa "0123"
###

### Search users by multiple params (email + name)
GET {{baseUrl}}/api/users?email=gmail&name=van
Authorization: Bearer {{owner_token}}

###
# EXPECT: 200 OK
# Response sẽ có users thỏa mãn cả email chứa "gmail" VÀ tên chứa "van"
###

### Get users with pagination (page 1, default limit 10)
GET {{baseUrl}}/api/users?page=1
Authorization: Bearer {{owner_token}}

###
# EXPECT: 200 OK
# Response sẽ có max 10 users và pagination info
###

### Get users with custom limit (page 1, limit 5)
GET {{baseUrl}}/api/users?page=1&limit=5
Authorization: Bearer {{owner_token}}

###
# EXPECT: 200 OK
# Response sẽ có max 5 users và pagination info
###

### Get users with search and pagination
GET {{baseUrl}}/api/users?email=gmail&page=1&limit=5
Authorization: Bearer {{owner_token}}

###
# EXPECT: 200 OK
# Response sẽ có max 5 users có email chứa "gmail" và pagination info
###

### Get all users (TENANT - FORBIDDEN)
GET {{baseUrl}}/api/users
Authorization: Bearer {{tenant_token}}

###
# EXPECT: 403 Forbidden
###

### Get all users (WITHOUT AUTH - FAIL)
GET {{baseUrl}}/api/users

###
# EXPECT: 401 Unauthorized
###

#######################################
### 8️⃣ TEST TOKEN INVALID
#######################################

### Invalid token
GET {{baseUrl}}/api/rooms
Authorization: Bearer abc.def.xyz

###
# EXPECT: 401 Invalid token
###
